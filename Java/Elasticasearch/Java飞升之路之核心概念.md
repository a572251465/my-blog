<h1 align = "center">核心概念</h1>

### 1. Elasticsearch 概论

- 分布式的搜索，存储和分析引擎
- 搜索引擎类的数据库
- ES 的优势
- 应用范围广

### 2. 节点

- 每个节点就是一个 Elasticsearch 实例
- 一个节点!=一台服务器
  > - 可以理解为启动一个进程就是一个 ES 实例，但是一个台服务器可以启动多个进程
  > - 我们可以一个端口启动一个实例，其实就是我们理解的一个节点，所以一个节点!=一台服务器

### 3. 节点角色

- master 候选节点
- data 数据节点
- data_content 数据内容节点
- data_hot 热节点
- data_warm 索引不再定期更新，但仍可查询
- data_code 冷节点
- lngest 预处理节点
- ml 机器学习节点
- remote_cluster_client 候选客户端节点
- transform 转换节点
- voting_only 投票节点

### 4. 分片

> - 一个索引包含一个或多个分片，在 7.0 之前默认五个主分片，每个主分片一个副本；在 7.0 之后默认一个主分片。副本可以在索引创建之后修改数量，但是主分片的数量一旦确定不可修改，只能创建索引
>
> - 每个分片都是一个 Lucene 实例，有完整的创建索引和处理请求的能力
> - ES 会自动再 nodes 上做分片均衡
> - 一个 doc 不可能同时存在于多个主分片中，但是当每个主分片的副本数量不为一时，可以同时存在于多个副本中
> - 每个主分片和其副本分片不能同时存在于同一个节点上，所以最低的可用配置是两个节点互为主备

<hr>

- `每个主分片和其副本分片不能同时存在同一个节点上`，主要是为了高可用，因为不然如果挂掉就同时挂掉了。如果不在同一个分片上后，如果主分片挂掉后，副本分片还可以再次启动
- 一般主分片有读写的能力，但是副本分片只有读的能力。
